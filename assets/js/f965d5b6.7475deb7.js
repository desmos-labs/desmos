"use strict";(self.webpackChunkdesmos_docs=self.webpackChunkdesmos_docs||[]).push([[21223],{3905:(e,t,r)=>{r.d(t,{Zo:()=>c,kt:()=>d});var s=r(67294);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t){if(null==e)return{};var r,s,n=function(e,t){if(null==e)return{};var r,s,n={},o=Object.keys(e);for(s=0;s<o.length;s++)r=o[s],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)r=o[s],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var l=s.createContext({}),p=function(e){var t=s.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):a(a({},t),e)),r},c=function(e){var t=p(e.components);return s.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return s.createElement(s.Fragment,{},t)}},h=s.forwardRef((function(e,t){var r=e.components,n=e.mdxType,o=e.originalType,l=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),h=p(r),d=n,m=h["".concat(l,".").concat(d)]||h[d]||u[d]||o;return r?s.createElement(m,a(a({ref:t},c),{},{components:r})):s.createElement(m,a({ref:t},c))}));function d(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=r.length,a=new Array(o);a[0]=h;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:n,a[1]=i;for(var p=2;p<o;p++)a[p]=r[p];return s.createElement.apply(null,a)}return s.createElement.apply(null,r)}h.displayName="MDXCreateElement"},49192:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>p,contentTitle:()=>i,default:()=>h,frontMatter:()=>a,metadata:()=>l,toc:()=>c});r(67294);var s=r(3905);function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},n.apply(this,arguments)}function o(e,t){if(null==e)return{};var r,s,n=function(e,t){if(null==e)return{};var r,s,n={},o=Object.keys(e);for(s=0;s<o.length;s++)r=o[s],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)r=o[s],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}const a={},i="ADR 023: Subspace relationships export",l={unversionedId:"architecture/adr-023-subspace-relationships-export",id:"architecture/adr-023-subspace-relationships-export",title:"ADR 023: Subspace relationships export",description:"Changelog",source:"@site/docs/architecture/adr-023-subspace-relationships-export.md",sourceDirName:"architecture",slug:"/architecture/adr-023-subspace-relationships-export",permalink:"/architecture/adr-023-subspace-relationships-export",draft:!1,editUrl:"https://github.com/desmos-labs/desmos/tree/master/docs/docs/architecture/adr-023-subspace-relationships-export.md",tags:[],version:"current",frontMatter:{},sidebar:"docs",previous:{title:"ADR 022: Per-subspace token factory",permalink:"/architecture/adr-022-per-subspace-token-factory"},next:{title:"ADR 024: Decentralized Identifiers resolver",permalink:"/architecture/adr-024-decentralized-identifiers-resolver"}},p={},c=[{value:"Changelog",id:"changelog",level:2},{value:"Status",id:"status",level:2},{value:"Abstract",id:"abstract",level:2},{value:"Context",id:"context",level:2},{value:"Decision",id:"decision",level:2},{value:"Permission",id:"permission",level:3},{value:"<code>Msg</code> Service",id:"msg-service",level:3},{value:"Consequences",id:"consequences",level:2},{value:"Backwards Compatibility",id:"backwards-compatibility",level:3},{value:"Positive",id:"positive",level:3},{value:"Negative",id:"negative",level:3},{value:"Neutral",id:"neutral",level:3},{value:"References",id:"references",level:2}],u={toc:c};function h(e){var{components:t}=e,r=o(e,["components"]);return(0,s.kt)("wrapper",n({},u,r,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("h1",n({},{id:"adr-023-subspace-relationships-export"}),"ADR 023: Subspace relationships export"),(0,s.kt)("h2",n({},{id:"changelog"}),"Changelog"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"June 16th, 2023: First draft;"),(0,s.kt)("li",{parentName:"ul"},"October 10th, 2023: Status update.")),(0,s.kt)("h2",n({},{id:"status"}),"Status"),(0,s.kt)("p",null,"REJECTED"),(0,s.kt)("h2",n({},{id:"abstract"}),"Abstract"),(0,s.kt)("p",null,"This ADR introduces a new feature that enables users export relationships inside a subspace into another subspace."),(0,s.kt)("h2",n({},{id:"context"}),"Context"),(0,s.kt)("p",null,"Inside Desmos, users can follow each other by creating the so-called ",(0,s.kt)("strong",{parentName:"p"},(0,s.kt)("em",{parentName:"strong"},"relationships")),". Each relationship represents a user following another user, and two users can be considered ",(0,s.kt)("strong",{parentName:"p"},(0,s.kt)("em",{parentName:"strong"},"friends"))," if they are following each other."),(0,s.kt)("p",null,"Currently, relationships are managed at the subspace level. This is meaning that Alice can follow Bob within subspace A, and choose whether to follow Bob or not within subspace B. This approach allows for more freedom and avoids privacy issues that may arise from making all followings public across all subspaces."),(0,s.kt)("p",null,"However, this system does not grant users full ownership of their follower base. If a user is banned from a subspace, they cannot easily transfer all their relationships to another subspace. This is because subspaces are isolated and relationships cannot be moved between them."),(0,s.kt)("h2",n({},{id:"decision"}),"Decision"),(0,s.kt)("p",null,"To address the issue mentioned above, we propose implementing a new operation to enable users to export their relationships from a subspace to another.\nIn addition, we will also enables subspace admins manage the relationships import/export from users."),(0,s.kt)("h3",n({},{id:"permission"}),"Permission"),(0,s.kt)("p",null,"We will add new two permissions to allow subspace admins manage relationships import/export from users:"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"PermissionExportRelationships: user having this permission can export relationships from this subspace to another."),(0,s.kt)("li",{parentName:"ul"},"PermissionsImportRelationships: user having this permission can import relationships from other subspace to this subspace.")),(0,s.kt)("h3",n({},{id:"msg-service"}),(0,s.kt)("inlineCode",{parentName:"h3"},"Msg")," Service"),(0,s.kt)("p",null,"We will implement a new handler that allows users to export their relationships from one subspace to another."),(0,s.kt)("pre",null,(0,s.kt)("code",n({parentName:"pre"},{className:"language-proto"}),"service Msg {\n  ...\n\n  // ExportRelationships allows users to export their relationships from one subspace to another\n  rpc ExportRelationships(MsgExportRelationships) returns (MsgExportRelationshipsResponse);\n}\n\n// MsgExportRelationships represents a message used to export relationships from one subspace to another\nmessage MsgExportRelationships {\n    // Id of the subspace from which the relationships are being exported\n    uint64 subspace_id = 1;\n\n    // Id of the subspace to which the relationships are being exported\n    uint64 target_subspace_id = 2;\n\n    // Address of user exporting the relationships.\n    string exporter = 3;\n}\n\n// MsgExportRelationshipsResponse defines the Msg/ExportRelationships response type\nmessage MsgExportRelationshipsResponse {}\n")),(0,s.kt)("h2",n({},{id:"consequences"}),"Consequences"),(0,s.kt)("h3",n({},{id:"backwards-compatibility"}),"Backwards Compatibility"),(0,s.kt)("p",null,"The solution outlined above is fully completely backward compatible since it introduces new a new message handler."),(0,s.kt)("h3",n({},{id:"positive"}),"Positive"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"Enable users to export the relationships from one subspace to another")),(0,s.kt)("h3",n({},{id:"negative"}),"Negative"),(0,s.kt)("p",null,"(none known)"),(0,s.kt)("h3",n({},{id:"neutral"}),"Neutral"),(0,s.kt)("p",null,"(none known)"),(0,s.kt)("h2",n({},{id:"references"}),"References"))}h.isMDXComponent=!0}}]);